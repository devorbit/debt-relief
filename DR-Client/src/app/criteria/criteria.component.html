<div class="criteria-container" *ngIf="first" novalidate>
    <form [formGroup]="formGroup" class="form">

        <div style="padding-bottom: 1em">
            <label style="font-size: x-large"><strong>Eligibility Criteria: </strong></label>
        </div>

        <mat-form-field class="form-element">
            <mat-select placeholder="Financial Hardship Reason" formControlName="reasonCd" [(ngModel)]="reasonDD"
                [disabled]="criteriaPresent" required>
                <mat-option type='text' value="TR">Termination</mat-option>
                <mat-option type='text' value="RW">Reduction of Wages</mat-option>
                <mat-option type='text' value="RD">Reduction of Workdays</mat-option>
                <mat-option type='text' value="LH">Loss of Income Impact of Family Member</mat-option>
                <mat-option type='text' value="HT">Lost job due to Health Issue</mat-option>
                <mat-option type='text' value="OT">Others</mat-option>
            </mat-select>
            <mat-error *ngIf="!formGroup.controls['reasonCd'].valid && formGroup.controls['reasonCd'].touched">
                Enter your Financial Hardship Reason
            </mat-error>
        </mat-form-field>

        <mat-form-field class="form-element">
            <mat-select placeholder="Details of Need" formControlName="needDetails" [(ngModel)]="needDD"
                [disabled]="criteriaPresent" required>
                <mat-option type='text' value="PR">Personal</mat-option>
                <mat-option type='text' value="VL">Vehicle Buying</mat-option>
                <mat-option type='text' value="HL">Home Loan EMI Payments</mat-option>
                <mat-option type='text' value="HT">Health Issues</mat-option>
                <mat-option type='text' value="OT">Others</mat-option>
            </mat-select>
            <mat-error *ngIf="!formGroup.controls['needDetails'].valid && formGroup.controls['needDetails'].touched">
                Enter your Details of Need
            </mat-error>
        </mat-form-field>

        <input type="file" name="file" ng2FileSelect [uploader]="uploader" multiple />
        <p class="files-uploaded" *ngFor="let item of uploader.queue"> <strong> {{ item?.file?.name }}
            </strong>
            ({{ item?.file?.size/1024/1024 | number:'.2' }} MB)
            <button type="button" class="btn btn-danger btn-xs" (click)="item.remove()">
                Remove </button> </p>

        <div class="form-element">
            <button mat-raised-button color="primary" type="submit" class="button" (click)="onSubmit()"
                *ngIf="!criteriaPresent"
                [disabled]="!formGroup.valid || uploader.getNotUploadedItems().length !== 1">Next</button>
            <button mat-raised-button color="primary" type="submit" class="button" (click)="nextClicked()"
                *ngIf="criteriaPresent">Next</button>
        </div>

    </form>
</div>

<div *ngIf="!first" class="criteria-container">
    
</div>

<ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-clip-rotate-multiple">
    <p style="color: #fff"> Loading... </p>
</ngx-spinner>